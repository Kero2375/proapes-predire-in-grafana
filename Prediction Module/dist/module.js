/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/ui","@grafana/data"],(function(t,e,n){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=20)}([function(e,n){e.exports=t},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n(1),i=n(5),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype.addValues=function(t){this.data.push([t.a,t.b,t.time])},e.prototype.getAt=function(t){return{a:this.data[t][0],b:this.data[t][1],time:this.data[t][2]}},e.fromSeries=function(t){var n,i;if(!t[0]||!t[1])throw Error("Set at least 2 query before");var o=t[0].fields[1].values.toArray(),a=[];t.forEach((function(t){a.push(t.fields[0].values.toArray())}));var s=new e;try{for(var l=Object(r.d)(o.keys()),c=l.next();!c.done;c=l.next()){var u=c.value;s.addValues({a:a[0][u],b:a[1][u],time:o[u]})}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return s},e}(i.a),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e}(i.b)},function(t,e,n){"use strict";var r=n(8),i=function(){function t(t,e,n,r,i){this.algorithm=t,this.coefficients=e,this.predFun=n,this.opt=r,i&&(this.accuracy=i)}return t.prototype.getAlgorithm=function(){return this.algorithm},t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getPredFun=function(){return this.predFun},t.prototype.getOpt=function(){return this.opt},t.prototype.getAcc=function(){return this.accuracy},t.prototype.setOpt=function(t){this.opt.setValueFile(t)},t.fromJSON=function(e){if(!e)throw Error("No file found");var n=JSON.parse(e),i=r.b[n.algorithm];return new t(n.algorithm,n.coefficients,n.predFun||"",i.fromJSON(n.opt||{}),n.accuracy)},t.prototype.toJSON=function(){return JSON.stringify({GroupName:"ProApes",Version:"3.0.0-1.9",PluginName:"PredireInGrafana",algorithm:this.algorithm,coefficients:this.coefficients,predFun:this.predFun,opt:this.opt,accuracy:this.accuracy},null,2)},t}();e.a=i},function(t,n){t.exports=e},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var r=function(){function t(){this.data=[]}return t.prototype.clear=function(){this.data=[]},t.prototype.size=function(){return this.data.length},t}(),i=function(){function t(t){this.index=0,this.data=t}return t.prototype.next=function(){return this.index<this.data.size()?this.data.getAt(this.index++):null},t}()},function(t,e,n){"use strict";var r=function(){function t(){this.order=2,this.precision=2,this.toPredict=0}return t.prototype.fromJSON=function(t){return this.order=t.order,this.precision=t.precision,this.toPredict=t.toPredict||0,this},t.prototype.setValueFile=function(t){try{var e=JSON.parse(t);this.order=e.opt.order,this.precision=e.opt.precision}catch(t){throw new Error("Predictor bad formatted")}},t.prototype.getOrder=function(){return this.order},t.prototype.getPrecision=function(){return this.precision},t.prototype.getToPredict=function(){return this.toPredict},t.prototype.setPrecision=function(t){this.precision=t},t.prototype.setToPredict=function(t){this.toPredict=t},t}();e.a=r},function(t,e,n){var r,i,o;i=[t],void 0===(o="function"==typeof(r=function(t){"use strict";var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var r={order:2,precision:2,period:null};function i(t,e){var n=[],r=[];t.forEach((function(t,i){null!==t[1]&&(r.push(t),n.push(e[i]))}));var i=r.reduce((function(t,e){return t+e[1]}),0)/r.length,o=r.reduce((function(t,e){var n=e[1]-i;return t+n*n}),0);return 1-r.reduce((function(t,e,r){var i=n[r],o=e[1]-i[1];return t+o*o}),0)/o}function o(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var a={linear:function(t,e){for(var n=[0,0,0,0,0],r=0,a=0;a<t.length;a++)null!==t[a][1]&&(r++,n[0]+=t[a][0],n[1]+=t[a][1],n[2]+=t[a][0]*t[a][0],n[3]+=t[a][0]*t[a][1],n[4]+=t[a][1]*t[a][1]);var s=r*n[2]-n[0]*n[0],l=r*n[3]-n[0]*n[1],c=0===s?0:o(l/s,e.precision),u=o(n[1]/r-c*n[0]/r,e.precision),p=function(t){return[o(t,e.precision),o(c*t+u,e.precision)]},d=t.map((function(t){return p(t[0])}));return{points:d,predict:p,equation:[c,u],r2:o(i(t,d),e.precision),string:0===u?"y = "+c+"x":"y = "+c+"x + "+u}},exponential:function(t,e){for(var n=[0,0,0,0,0,0],r=0;r<t.length;r++)null!==t[r][1]&&(n[0]+=t[r][0],n[1]+=t[r][1],n[2]+=t[r][0]*t[r][0]*t[r][1],n[3]+=t[r][1]*Math.log(t[r][1]),n[4]+=t[r][0]*t[r][1]*Math.log(t[r][1]),n[5]+=t[r][0]*t[r][1]);var a=n[1]*n[2]-n[5]*n[5],s=Math.exp((n[2]*n[3]-n[5]*n[4])/a),l=(n[1]*n[4]-n[5]*n[3])/a,c=o(s,e.precision),u=o(l,e.precision),p=function(t){return[o(t,e.precision),o(c*Math.exp(u*t),e.precision)]},d=t.map((function(t){return p(t[0])}));return{points:d,predict:p,equation:[c,u],string:"y = "+c+"e^("+u+"x)",r2:o(i(t,d),e.precision)}},logarithmic:function(t,e){for(var n=[0,0,0,0],r=t.length,a=0;a<r;a++)null!==t[a][1]&&(n[0]+=Math.log(t[a][0]),n[1]+=t[a][1]*Math.log(t[a][0]),n[2]+=t[a][1],n[3]+=Math.pow(Math.log(t[a][0]),2));var s=o((r*n[1]-n[2]*n[0])/(r*n[3]-n[0]*n[0]),e.precision),l=o((n[2]-s*n[0])/r,e.precision),c=function(t){return[o(t,e.precision),o(o(l+s*Math.log(t),e.precision),e.precision)]},u=t.map((function(t){return c(t[0])}));return{points:u,predict:c,equation:[l,s],string:"y = "+l+" + "+s+" ln(x)",r2:o(i(t,u),e.precision)}},power:function(t,e){for(var n=[0,0,0,0,0],r=t.length,a=0;a<r;a++)null!==t[a][1]&&(n[0]+=Math.log(t[a][0]),n[1]+=Math.log(t[a][1])*Math.log(t[a][0]),n[2]+=Math.log(t[a][1]),n[3]+=Math.pow(Math.log(t[a][0]),2));var s=(r*n[1]-n[0]*n[2])/(r*n[3]-Math.pow(n[0],2)),l=(n[2]-s*n[0])/r,c=o(Math.exp(l),e.precision),u=o(s,e.precision),p=function(t){return[o(t,e.precision),o(o(c*Math.pow(t,u),e.precision),e.precision)]},d=t.map((function(t){return p(t[0])}));return{points:d,predict:p,equation:[c,u],string:"y = "+c+"x^"+u,r2:o(i(t,d),e.precision)}},polynomial:function(t,e){for(var r=[],a=[],s=0,l=0,c=t.length,u=e.order+1,p=0;p<u;p++){for(var d=0;d<c;d++)null!==t[d][1]&&(s+=Math.pow(t[d][0],p)*t[d][1]);r.push(s),s=0;for(var f=[],h=0;h<u;h++){for(var m=0;m<c;m++)null!==t[m][1]&&(l+=Math.pow(t[m][0],p+h));f.push(l),l=0}a.push(f)}a.push(r);for(var g=function(t,e){for(var n=t,r=t.length-1,i=[e],o=0;o<r;o++){for(var a=o,s=o+1;s<r;s++)Math.abs(n[o][s])>Math.abs(n[o][a])&&(a=s);for(var l=o;l<r+1;l++){var c=n[l][o];n[l][o]=n[l][a],n[l][a]=c}for(var u=o+1;u<r;u++)for(var p=r;p>=o;p--)n[p][u]-=n[p][o]*n[o][u]/n[o][o]}for(var d=r-1;d>=0;d--){for(var f=0,h=d+1;h<r;h++)f+=n[h][d]*i[h];i[d]=(n[r][d]-f)/n[d][d]}return i}(a,u).map((function(t){return o(t,e.precision)})),v=function(t){return[o(t,e.precision),o(g.reduce((function(e,n,r){return e+n*Math.pow(t,r)}),0),e.precision)]},y=t.map((function(t){return v(t[0])})),b="y = ",A=g.length-1;A>=0;A--)b+=A>1?g[A]+"x^"+A+" + ":1===A?g[A]+"x + ":g[A];return{string:b,points:y,predict:v,equation:[].concat(n(g)).reverse(),r2:o(i(t,y),e.precision)}}};t.exports=Object.keys(a).reduce((function(t,n){return e({_round:o},t,(l=function(t,i){return a[n](t,e({},r,i))},(s=n)in(i={})?Object.defineProperty(i,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[s]=l,i));var i,s,l}),{})})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){"use strict";var r=n(2),i=n(1),o=n(5),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.b)(e,t),e.prototype.addValues=function(t){this.data.push([t.value,t.time])},e.prototype.getAt=function(t){return{value:this.data[t][0],time:this.data[t][1]}},e}(o.a),s=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Object(i.b)(e,t)}(o.b),function(){function t(){this.predicted=new a}return t.prototype.predict=function(t,e){this.predicted.clear(),this.data=new r.a,this.toPredict=e.getOpt().getToPredict();for(var n,i,o=1-(this.toPredict||0),a=e.getCoefficients(),s=new r.b(t);n=s.next();)(n.a||n.b)&&(this.predicted.addValues({value:(i=0===o?n.a:n.b,i?i*a[0]+a[1]:0),time:n.time}),this.data.addValues({a:n.a,b:n.b,time:n.time}));return this.predicted},t.prototype.saveToInflux=function(){var t=this.predicted.size()-1;$.post({url:"http://localhost:8086/write?db=telegraf",data:"predictionRL value="+this.predicted.getAt(t).value+" "+this.predicted.getAt(t).time+"000000"});var e,n=this.predicted.getAt(t).time;e=this.toPredict&&0!==this.toPredict?this.data.getAt(t).b-this.predicted.getAt(t).value:this.data.getAt(t).a-this.predicted.getAt(t).value,$.post({url:"http://localhost:8086/write?db=telegraf",data:"predictionDiffRL value="+Math.abs(e)+" "+n+"000000"})},t}()),l=function(){function t(){this.predicted=new a}return t.prototype.predict=function(t,e){this.predicted.clear(),this.data=new r.a,this.toPredict=e.getOpt().getToPredict();for(var n,i,o=1-(this.toPredict||0),a=e.getCoefficients(),s=new r.b(t);n=s.next();)(n.a||n.b)&&(this.predicted.addValues({value:(i=0===o?n.a:n.b,a[0]*Math.exp(a[1]*i)),time:n.time}),this.data.addValues({a:n.a,b:n.b,time:n.time}));return this.predicted},t.prototype.saveToInflux=function(){var t=this.predicted.size()-1;$.post({url:"http://localhost:8086/write?db=telegraf",data:"predictionREXP value="+this.predicted.getAt(t).value+" "+this.predicted.getAt(t).time+"000000"});var e,n=this.predicted.getAt(t).time;e=this.toPredict&&0!==this.toPredict?this.data.getAt(t).b-this.predicted.getAt(t).value:this.data.getAt(t).a-this.predicted.getAt(t).value,$.post({url:"http://localhost:8086/write?db=telegraf",data:"predictionDiffREXP value="+Math.abs(e)+" "+n+"000000"})},t}(),c=function(){function t(){this.predicted=new a}return t.prototype.predict=function(t,e){this.predicted.clear(),this.data=new r.a,this.toPredict=e.getOpt().getToPredict();for(var n,i,o=1-(this.toPredict||0),a=e.getCoefficients(),s=new r.b(t);n=s.next();)(n.a||n.b)&&(this.predicted.addValues({value:(i=0===o?n.a:n.b,a[0]+a[1]*Math.log(i)),time:n.time}),this.data.addValues({a:n.a,b:n.b,time:n.time}));return this.predicted},t.prototype.saveToInflux=function(){var t=this.predicted.size()-1;$.post({url:"http://localhost:8086/write?db=telegraf",data:"predictionRLOG value="+this.predicted.getAt(t).value+" "+this.predicted.getAt(t).time+"000000"});var e,n=this.predicted.getAt(t).time;e=this.toPredict&&0!==this.toPredict?this.data.getAt(t).b-this.predicted.getAt(t).value:this.data.getAt(t).a-this.predicted.getAt(t).value,$.post({url:"http://localhost:8086/write?db=telegraf",data:"predictionDiffRLOG value="+Math.abs(e)+" "+n+"000000"})},t}(),u=function(){function t(){this.predicted=new a}return t.prototype.predict=function(t,e){this.predicted.clear();for(var n,i=e.getOpt().getFirstQuery()||0,o=e.getCoefficients(),a=function(t,e){return t*o[0]+e*o[1]+o[2]},s=new r.b(t);n=s.next();)if(n.a||n.b){var l=0===i?a(n.a,n.b):a(n.b,n.a),c=0===l?0:l>0?1:-1;this.predicted.addValues({value:c,time:n.time})}return this.predicted},t.prototype.saveToInflux=function(){var t=this.predicted.getAt(this.predicted.size()-1);$.post({url:"http://localhost:8086/write?db=telegraf",data:"predictionSVM value="+t.value+" "+t.time+"000000"})},t}(),p=n(0),d=n.n(p),f=n(4),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.b)(e,t),e}(p.PureComponent),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.b)(e,t),e.prototype.getSeriesNames=function(){return this.props.data.series.map((function(t){return t.name||"unknown"}))},e.prototype.renderQueryOptions=function(){var t,e,n,r=this.getSeriesNames(),o=[];try{for(var a=Object(i.d)(r.keys()),s=a.next();!s.done;s=a.next()){var l=s.value;o.push(d.a.createElement("option",{value:l,selected:(null===(n=this.predictor)||void 0===n?void 0:n.getOpt().getToPredict())===l},r[l]))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return o},e.prototype.setToPredict=function(t){var e;(null===(e=this.props.options.predictor)||void 0===e?void 0:e.getOpt()).setToPredict(Number.parseInt(t,10)),this.render()},e.prototype.render=function(){var t,e,n,r,i,o=this;return this.predictor=this.props.options.predictor,(null===(t=this.predictor)||void 0===t?void 0:t.getOpt().getToPredict())||null===(e=this.predictor)||void 0===e||e.getOpt().setToPredict(0),d.a.createElement(f.PanelOptionsGroup,{title:"Regression - "+(null===(n=this.predictor)||void 0===n?void 0:n.getAlgorithm())},d.a.createElement("p",null,(null===(r=this.predictor)||void 0===r?void 0:r.getPredFun())?"Function: "+(null===(i=this.predictor)||void 0===i?void 0:i.getPredFun()):""),d.a.createElement("label",{className:"gf-form-label width-10",style:{display:"inline-block"}}," ","y (value to predict)"," "),d.a.createElement("div",{className:"gf-form-select-wrapper width-10",style:{display:"inline-block"}},d.a.createElement("select",{className:"input-small gf-form-input",onChange:function(t){return o.setToPredict(t.target.value)}},this.renderQueryOptions())))},e}(h),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.b)(e,t),e.prototype.getSeriesNames=function(){return this.props.data.series.map((function(t){return t.name||"unknown"}))},e.prototype.renderQueryOptions=function(){var t,e,n,r=this.getSeriesNames(),o=[];try{for(var a=Object(i.d)(r.keys()),s=a.next();!s.done;s=a.next()){var l=s.value;o.push(d.a.createElement("option",{value:l,selected:(null===(n=this.predictor)||void 0===n?void 0:n.getOpt().getFirstQuery())===l},r[l]))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return o},e.prototype.setFirstQuery=function(t){var e;(null===(e=this.props.options.predictor)||void 0===e?void 0:e.getOpt()).setFirstQuery(Number.parseInt(t,10)),this.render()},e.prototype.render=function(){var t,e,n,r,i=this;return this.predictor=this.props.options.predictor,(null===(t=this.predictor)||void 0===t?void 0:t.getOpt().getFirstQuery())||null===(e=this.predictor)||void 0===e||e.getOpt().setFirstQuery(0),d.a.createElement(f.PanelOptionsGroup,{title:"SVM"},d.a.createElement("p",null,(null===(n=this.predictor)||void 0===n?void 0:n.getPredFun())?"Function: "+(null===(r=this.predictor)||void 0===r?void 0:r.getPredFun()):""),d.a.createElement("label",{className:"gf-form-label width-10",style:{display:"inline-block"}}," ","x1 (first query)"," "),d.a.createElement("div",{className:"gf-form-select-wrapper width-10",style:{display:"inline-block"}},d.a.createElement("select",{className:"input-small gf-form-input",onChange:function(t){return i.setFirstQuery(t.target.value)}},this.renderQueryOptions())))},e}(h),v=n(6),y=n(9);n.d(e,"c",(function(){return b})),n.d(e,"a",(function(){return A})),n.d(e,"b",(function(){return E}));var b={RL:new s,SVM:new u,REXP:new l,RLOG:new c},A={RL:m,SVM:g,REXP:m,RLOG:m},E={RL:new v.a,SVM:new y.a,REXP:new v.a,RLOG:new v.a}},function(t,e,n){"use strict";var r=function(){function t(){this.C=1,this.maxiter=1e4,this.numpass=10,this.firstQuery=0}return t.prototype.fromJSON=function(t){return this.C=t.C,this.maxiter=t.maxiter,this.numpass=t.numpass,this.firstQuery=t.firstQuery||0,this},t.prototype.setValueFile=function(t){try{var e=JSON.parse(t);this.C=e.opt.C,this.maxiter=e.opt.maxiter,this.numpass=e.opt.numpass}catch(t){throw new Error("Predictor bad formatted")}},t.prototype.getC=function(){return this.C},t.prototype.getMaxIter=function(){return this.maxiter},t.prototype.getNumPass=function(){return this.numpass},t.prototype.getFirstQuery=function(){return this.firstQuery},t.prototype.setC=function(t){this.C=t},t.prototype.setMaxIter=function(t){this.maxiter=t},t.prototype.setNumPass=function(t){this.numpass=t},t.prototype.setFirstQuery=function(t){this.firstQuery=t},t}();e.a=r},function(t,e){t.exports=n},function(t,e,n){var r=n(13);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(15)(r,i);r.locals&&(t.exports=r.locals)},function(t){t.exports=JSON.parse('{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"links":[],"panels":[{"datasource":null,"gridPos":{"h":9,"w":10,"x":0,"y":0},"id":2,"options":{"predictor":"{\\n  \\"GroupName\\": \\"ProApes\\",\\n  \\"Version\\": \\"1.5\\",\\n  \\"PluginName\\": \\"PredireInGrafana\\",\\n  \\"algorithm\\": \\"RL\\",\\n  \\"coefficients\\": [\\n    1.07,\\n    0.46\\n  ],\\n  \\"predFun\\": \\"y = 1.07x + 0.46\\",\\n  \\"opt\\": {\\n    \\"order\\": 2,\\n    \\"precision\\": 2,\\n    \\"toPredict\\": 0\\n  },\\n  \\"accuracy\\": 0.29\\n}"},"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"cpu","orderByTime":"ASC","policy":"default","query":"SELECT mean(\\"usage_system\\") FROM \\"cpu\\" WHERE (\\"cpu\\" = \'cpu0\') AND $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["usage_system"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[{"key":"cpu","operator":"=","value":"cpu0"}]},{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"cpu","orderByTime":"ASC","policy":"default","query":"SELECT mean(\\"usage_system\\") FROM \\"cpu\\" WHERE (\\"cpu\\" = \'cpu0\') AND $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"B","resultFormat":"time_series","select":[[{"params":["usage_system"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[{"key":"cpu","operator":"=","value":"cpu1"}]}],"timeFrom":null,"timeShift":null,"title":"Prediction Panel","type":"prediction-panel"},{"alert":{"alertRuleTags":{},"conditions":[{"evaluator":{"params":[10],"type":"gt"},"operator":{"type":"and"},"query":{"params":["A","5m","now"]},"reducer":{"params":[],"type":"avg"},"type":"query"}],"executionErrorState":"alerting","for":"5m","frequency":"5s","handler":1,"name":"Diff alert","noDataState":"no_data","notifications":[]},"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":10,"y":0},"hiddenSeries":false,"id":4,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["linear"],"type":"fill"}],"measurement":"predictionDiffRL","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[{"colorMode":"critical","fill":true,"line":true,"op":"gt","value":10}],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Prediction diff","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"5s","schemaVersion":22,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"now-5m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"Sample Panel","uid":"sample-panel","variables":{"list":[]},"version":11}')},function(t,e,n){(e=n(14)(!0)).push([t.i,'.main h1 {\n  text-align: center; }\n\n.container {\n  width: 100%;\n  margin: auto;\n  padding: 0; }\n\n.container > div {\n  width: 100%;\n  padding: 1em;\n  background: #292a2d;\n  border-radius: 4px;\n  border: 1px solid #343436; }\n\n.button {\n  border: 1px solid #818181;\n  margin-right: .5em;\n  margin-bottom: .5em;\n  padding-left: 1em;\n  cursor: pointer; }\n\n.button input {\n  display: none; }\n\nbutton, .button {\n  display: inline-flex;\n  align-items: center;\n  font-weight: 500;\n  font-size: 14px;\n  font-family: "Roboto", "Helvetica Neue", Arial, sans-serif;\n  line-height: 1;\n  padding: 8px 16px;\n  vertical-align: middle;\n  cursor: pointer;\n  border: medium none;\n  height: 32px;\n  border-radius: 2px;\n  background: rgba(0, 0, 0, 0) linear-gradient(180deg, #3f84ac, #38779b) repeat scroll 0% 0%;\n  color: white;\n  text-shadow: rgba(0, 0, 0, 0.1) 0px -1px; }\n\nbutton:hover, .button:hover {\n  background: #3f84ac none repeat scroll 0% 0%;\n  color: white; }\n\nselect {\n  border: none;\n  border-radius: 4px; }\n\n/* Correzioni */\n.gf-form-label {\n  padding: 7px; }\n\n.mb-2 {\n  margin-bottom: 2px; }\n\n.mr-0 {\n  margin-right: 0px !important; }\n\n@media screen and (max-width: 767px) {\n  .page-sidebar-section {\n    margin-top: 1em;\n    margin-left: 1em; }\n  .page-header__select-nav {\n    margin-left: 1em; }\n  .sidebar-content {\n    margin-left: 1em;\n    width: calc(100% - 105px); }\n  .gf-form-select-wrapper .gf-form-select-icon + .gf-form-input {\n    padding-left: 1em; } }\n\n@media screen and (max-width: 480px) {\n  .page-sidebar-section {\n    margin-top: 1em;\n    margin-left: 1em; }\n  .page-header__select-nav {\n    margin-left: 1em; }\n  .sidebar-content {\n    width: 100%; }\n  .gf-form-select-wrapper .gf-form-select-icon + .gf-form-input {\n    padding-left: 1em; } }\n',"",{version:3,sources:["App.css"],names:[],mappings:"AAAA;EACE,kBAAkB,EAAE;;AAEtB;EACE,WAAW;EACX,YAAY;EACZ,UAAU,EAAE;;AAEd;EACE,WAAW;EACX,YAAY;EACZ,mBAAmB;EACnB,kBAAkB;EAClB,yBAAyB,EAAE;;AAE7B;EACE,yBAAyB;EACzB,kBAAkB;EAClB,mBAAmB;EACnB,iBAAiB;EACjB,eAAe,EAAE;;AAEnB;EACE,aAAa,EAAE;;AAEjB;EACE,oBAAoB;EAEpB,mBAAmB;EACnB,gBAAgB;EAChB,eAAe;EACf,0DAA0D;EAC1D,cAAc;EACd,iBAAiB;EACjB,sBAAsB;EACtB,eAAe;EACf,mBAAmB;EACnB,YAAY;EACZ,kBAAkB;EAClB,0FAA0F;EAC1F,YAAY;EACZ,wCAAwC,EAAE;;AAE5C;EACE,4CAA4C;EAC5C,YAAY,EAAE;;AAEhB;EACE,YAAY;EACZ,kBAAkB,EAAE;;AAEtB,eAAe;AACf;EACE,YAAY,EAAE;;AAEhB;EACE,kBAAkB,EAAE;;AAEtB;EACE,4BAA4B,EAAE;;AAEhC;EACE;IACE,eAAe;IACf,gBAAgB,EAAE;EACpB;IACE,gBAAgB,EAAE;EACpB;IACE,gBAAgB;IAChB,yBAAyB,EAAE;EAC7B;IACE,iBAAiB,EAAE,EAAE;;AAEzB;EACE;IACE,eAAe;IACf,gBAAgB,EAAE;EACpB;IACE,gBAAgB,EAAE;EACpB;IACE,WAAW,EAAE;EACf;IACE,iBAAiB,EAAE,EAAE",file:"App.css",sourcesContent:['.main h1 {\n  text-align: center; }\n\n.container {\n  width: 100%;\n  margin: auto;\n  padding: 0; }\n\n.container > div {\n  width: 100%;\n  padding: 1em;\n  background: #292a2d;\n  border-radius: 4px;\n  border: 1px solid #343436; }\n\n.button {\n  border: 1px solid #818181;\n  margin-right: .5em;\n  margin-bottom: .5em;\n  padding-left: 1em;\n  cursor: pointer; }\n\n.button input {\n  display: none; }\n\nbutton, .button {\n  display: inline-flex;\n  -moz-box-align: center;\n  align-items: center;\n  font-weight: 500;\n  font-size: 14px;\n  font-family: "Roboto", "Helvetica Neue", Arial, sans-serif;\n  line-height: 1;\n  padding: 8px 16px;\n  vertical-align: middle;\n  cursor: pointer;\n  border: medium none;\n  height: 32px;\n  border-radius: 2px;\n  background: rgba(0, 0, 0, 0) linear-gradient(180deg, #3f84ac, #38779b) repeat scroll 0% 0%;\n  color: white;\n  text-shadow: rgba(0, 0, 0, 0.1) 0px -1px; }\n\nbutton:hover, .button:hover {\n  background: #3f84ac none repeat scroll 0% 0%;\n  color: white; }\n\nselect {\n  border: none;\n  border-radius: 4px; }\n\n/* Correzioni */\n.gf-form-label {\n  padding: 7px; }\n\n.mb-2 {\n  margin-bottom: 2px; }\n\n.mr-0 {\n  margin-right: 0px !important; }\n\n@media screen and (max-width: 767px) {\n  .page-sidebar-section {\n    margin-top: 1em;\n    margin-left: 1em; }\n  .page-header__select-nav {\n    margin-left: 1em; }\n  .sidebar-content {\n    margin-left: 1em;\n    width: calc(100% - 105px); }\n  .gf-form-select-wrapper .gf-form-select-icon + .gf-form-input {\n    padding-left: 1em; } }\n\n@media screen and (max-width: 480px) {\n  .page-sidebar-section {\n    margin-top: 1em;\n    margin-left: 1em; }\n  .page-header__select-nav {\n    margin-left: 1em; }\n  .sidebar-content {\n    width: 100%; }\n  .gf-form-select-wrapper .gf-form-select-icon + .gf-form-input {\n    padding-left: 1em; } }\n']}]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),o=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(o).concat([i]).join("\n")}var a,s,l;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},function(t,e,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(t,e){return e?e.querySelector(t):document.querySelector(t)},l=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=s.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),c=null,u=0,p=[],d=n(16);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(b(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(b(r.parts[a],e));o[r.id]={id:r.id,refs:1,parts:s}}}}function h(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function m(t,e){var n=l(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=p[p.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),p.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=l(t.insertAt.before,n);n.insertBefore(e,i)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=p.indexOf(t);e>=0&&p.splice(e,1)}function v(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return y(e,t.attrs),m(t,e),e}function y(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function b(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var a=u++;n=c||(c=v(e)),r=w.bind(null,n,a,!1),i=w.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",y(e,t.attrs),m(t,e),e}(e),r=C.bind(null,n,e),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=x.bind(null,n),i=function(){g(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return f(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}t&&f(h(t,e),e);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var A,E=(A=[],function(t,e){return A[t]=e,A.filter(Boolean).join("\n")});function w(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=E(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function x(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function C(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=d(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(t,e,n){!function(t){var e=function(t){};function n(t){return function(e,n){for(var r=0,i=0;i<e.length;i++)r+=(e[i]-n[i])*(e[i]-n[i]);return Math.exp(-r/(2*t*t))}}function r(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}e.prototype={train:function(t,e,i){this.data=t,this.labels=e;var o=(i=i||{}).C||1,a=i.tol||1e-4,s=i.alphatol||1e-7,l=i.maxiter||1e4,c=i.numpasses||10,u=r;if(this.kernelType="linear","kernel"in i)if("string"==typeof i.kernel){if("linear"===i.kernel&&(this.kernelType="linear",u=r),"rbf"===i.kernel){var p=i.rbfsigma||.5;this.rbfSigma=p,this.kernelType="rbf",u=n(p)}}else this.kernelType="custom",u=i.kernel;this.kernel=u,this.N=t.length;var d=this.N;this.D=t[0].length;this.D;this.alpha=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e}(d),this.b=0,this.usew_=!1;for(var f,h,m=0,g=0;g<c&&m<l;){for(var v=0,y=0;y<d;y++){var b=this.marginOne(t[y])-e[y];if(e[y]*b<-a&&this.alpha[y]<o||e[y]*b>a&&this.alpha[y]>0){for(var A=y;A===y;)f=0,h=this.N,A=Math.floor(Math.random()*(h-f)+f);var E=this.marginOne(t[A])-e[A];ai=this.alpha[y],aj=this.alpha[A];var w=0,x=o;if(e[y]===e[A]?(w=Math.max(0,ai+aj-o),x=Math.min(o,ai+aj)):(w=Math.max(0,aj-ai),x=Math.min(o,o+aj-ai)),Math.abs(w-x)<1e-4)continue;var C=2*u(t[y],t[A])-u(t[y],t[y])-u(t[A],t[A]);if(C>=0)continue;var O=aj-e[A]*(b-E)/C;if(O>x&&(O=x),O<w&&(O=w),Math.abs(aj-O)<1e-4)continue;this.alpha[A]=O;var P=ai+e[y]*e[A]*(aj-O);this.alpha[y]=P;var B=this.b-b-e[y]*(P-ai)*u(t[y],t[y])-e[A]*(O-aj)*u(t[y],t[A]),N=this.b-E-e[y]*(P-ai)*u(t[y],t[A])-e[A]*(O-aj)*u(t[A],t[A]);this.b=.5*(B+N),P>0&&P<o&&(this.b=B),O>0&&O<o&&(this.b=N),v++}}m++,0==v?g++:g=0}if("linear"===this.kernelType){this.w=new Array(this.D);for(A=0;A<this.D;A++){var S=0;for(y=0;y<this.N;y++)S+=this.alpha[y]*e[y]*t[y][A];this.w[A]=S,this.usew_=!0}}else{var k=[],R=[],j=[];for(y=0;y<this.N;y++)this.alpha[y]>s&&(k.push(this.data[y]),R.push(this.labels[y]),j.push(this.alpha[y]));this.data=k,this.labels=R,this.alpha=j,this.N=this.data.length}var M={};return M.iters=m,M},marginOne:function(t){var e=this.b;if(this.usew_)for(var n=0;n<this.D;n++)e+=t[n]*this.w[n];else for(var r=0;r<this.N;r++)e+=this.alpha[r]*this.labels[r]*this.kernel(t,this.data[r]);return e},predictOne:function(t){return this.marginOne(t)>0?1:-1},margins:function(t){for(var e=t.length,n=new Array(e),r=0;r<e;r++)n[r]=this.marginOne(t[r]);return n},predict:function(t){for(var e=this.margins(t),n=0;n<e.length;n++)e[n]=e[n]>0?1:-1;return e},getWeights:function(){for(var t=new Array(this.D),e=0;e<this.D;e++){for(var n=0,r=0;r<this.N;r++)n+=this.alpha[r]*this.labels[r]*this.data[r][e];t[e]=n}return{w:t,b:this.b}},toJSON:function(){return"custom"===this.kernelType?(console.log("Can't save this SVM because it's using custom, unsupported kernel..."),{}):(json={},json.N=this.N,json.D=this.D,json.b=this.b,json.kernelType=this.kernelType,"linear"===this.kernelType&&(json.w=this.w),"rbf"===this.kernelType&&(json.rbfSigma=this.rbfSigma,json.data=this.data,json.labels=this.labels,json.alpha=this.alpha),json)},fromJSON:function(t){this.N=t.N,this.D=t.D,this.b=t.b,this.kernelType=t.kernelType,"linear"===this.kernelType?(this.w=t.w,this.usew_=!0,this.kernel=r):"rbf"==this.kernelType?(this.rbfSigma=t.rbfSigma,this.kernel=n(this.rbfSigma),this.data=t.data,this.labels=t.labels,this.alpha=t.alpha):console.log("ERROR! unrecognized kernel type."+this.kernelType)}},(t=t||{}).SVM=e,t.makeRbfKernel=n,t.linearKernel=r}(t.exports)},function(t,e,n){(function(n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){a(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,n,a){var s=o.URL||o.webkitURL,l=document.createElement("a");n=n||t.name||"download",l.download=n,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?i(l):r(l.href)?e(t,n,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,o){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),n);else if(r(t))e(t,n,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){i(a)}))}}:function(t,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var a="application/octet-stream"===t.type,s=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},c.readAsDataURL(t)}else{var u=o.URL||o.webkitURL,p=u.createObjectURL(t);i?i.location=p:location.href=p,i=null,setTimeout((function(){u.revokeObjectURL(p)}),4e4)}});o.saveAs=a.saveAs=a,t.exports=a})?r.apply(e,i):r)||(t.exports=o)}).call(this,n(19))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var r=n(10),i=n(1),o=n(0),a=n.n(o),s=n(4),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.b)(e,t),e.prototype.makeDashboard=function(){return Object(i.a)(this,void 0,void 0,(function(){var t;return Object(i.c)(this,(function(e){return t={dashboard:n(12),overwrite:!0},$.post({url:"/api/dashboards/db",contentType:"application/json",dataType:"application/json",data:JSON.stringify(t),complete:function(e){alert("Dashboard: "+t.dashboard.title+"\nStatus: "+e.statusText),location.replace("/d/"+t.dashboard.uid)}}),[2]}))}))},e.prototype.render=function(){var t=this;return a.a.createElement("div",null,a.a.createElement(s.Button,{onClick:function(){return t.makeDashboard()}},"Sample Dashboard"))},e}(o.PureComponent),c=(n(11),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.b)(e,t),e.prototype.renderAlgorithmView=function(){return this.props.AlgView?a.a.createElement(this.props.AlgView,{options:this.props.options}):a.a.createElement("div",null)},e.prototype.render=function(){var t=this.props,e=t.buttonSelectAlg,n=t.selectAlg,r=t.buttonInputData,i=t.buttonInputOpt,o=t.buttonTrain,s=t.predictor,l=t.nameAcc,c=t.accuracy,u=t.buttonDownload;return a.a.createElement("div",{className:"main"},a.a.createElement("div",{className:"container"},a.a.createElement("h1",null,"Training Module"),a.a.createElement("div",{className:"gf-form"},a.a.createElement("label",{htmlFor:"alg",className:"gf-form-label width-15"},"Choose the algorithm:"),a.a.createElement("div",{className:"gf-form-select-wrapper max-width-20"},a.a.createElement("select",{className:"input-small gf-form-input",disabled:!1,id:"alg",onChange:n},a.a.createElement("option",{value:"RL"},"Regressione Lineare (RL)"),a.a.createElement("option",{value:"SVM"},"Support Vector Machine (SVM)"),a.a.createElement("option",{value:"RLOG"},"Regressione Logaritmica (RLOG)"),a.a.createElement("option",{value:"REXP"},"Regressione Esponenziale (REXP)")))),a.a.createElement("div",{className:"gf-form"},a.a.createElement("button",{className:"css-370vzt-button",onClick:e},"Confirm"))),a.a.createElement("div",null,a.a.createElement("div",{className:"graph"},this.renderAlgorithmView())),a.a.createElement("div",{id:"import",style:{display:"none"}},a.a.createElement("div",{className:"container"},a.a.createElement("div",null,a.a.createElement("label",{className:"button"},"Import data (.csv)",a.a.createElement("input",{className:"form-input",type:"file",name:"data",id:"data",onChange:r,accept:".csv,.txt"})),a.a.createElement("label",{className:"button"},"Import previous options (.json)",a.a.createElement("input",{className:"form-input",type:"file",name:"opt",id:"opt",onChange:i,accept:".json"})),a.a.createElement("input",{className:"button",id:"train",type:"button",value:"Train 🚂",onClick:function(){o()},style:{display:"none"}}))),a.a.createElement("div",{className:"container"},a.a.createElement("h1",null,"Results"),a.a.createElement("div",null,a.a.createElement("p",{className:"function gf-form-label mr-0",style:{display:"none"}},"Function: ",s),a.a.createElement("p",{className:"function gf-form-label mr-0",style:{display:"none"}},l,": ",c),a.a.createElement("div",null,a.a.createElement("input",{className:"button",type:"button",value:"Download Predictor",id:"download",onClick:u,style:{display:"none"}}),a.a.createElement("input",{className:"button",id:"reset",type:"button",value:"Reset",onClick:function(){window.location.reload(!1)},style:{display:"none"}}))))))},e}(a.a.Component)),u=n(7),p=n.n(u),d=n(3),f=function(){function t(){}return t.prototype.train=function(t,e){return new d.a("RL",p.a.linear(t.getPoints(),{order:e.getOrder(),precision:e.getPrecision()}).equation,p.a.linear(t.getPoints(),{order:e.getOrder(),precision:e.getPrecision()}).string,e,p.a.linear(t.getPoints(),{order:e.getOrder(),precision:e.getPrecision()}).r2)},t}(),h=function(){function t(){}return t.prototype.train=function(t,e){var r=new(n(17).SVM);r.train(t.getPoints(),t.getLabels(),{C:e.getC(),maxiter:e.getMaxIter(),numpass:e.getNumPass()});for(var i,o,a,s=r.predict(t.getPoints()),l=[[0,0],[0,0]],c=0;c<t.getLabels().length;c++)s[c]>0?1===t.getLabels()[c]?l[0][0]++:l[0][1]++:1===t.getLabels()[c]?l[1][0]++:l[1][1]++;var u=(i=l[0][0])/(i+(o=l[0][1])),p=i/(i+(a=l[1][0])),f=u*p*2/(u+p);return i+o!==0&&i+a!==0||(f=0),new d.a("SVM",[r.b,r.w[0],r.w[1]],"y = "+-r.w[0]/r.w[1]+"x + "+-r.b/r.w[0],e,f)},t}(),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={opt:0},e}return Object(i.b)(e,t),e.prototype.render=function(){var t=this,e=this.props.options;return a.a.createElement("div",{className:"container"},a.a.createElement("h1",{id:"options"},"Options"),a.a.createElement("div",{id:"SVMopt",className:"mb-2"},a.a.createElement("label",{className:"gf-form-label width-10 mb-2"},"Kernel type: linear"),a.a.createElement("label",{className:"gf-form-label width-10 mb-2"},"Alpha Tollerance: 1e-7"),a.a.createElement("label",{className:"gf-form-label width-10 mb-2"},"Tollerance: 1e-4"),a.a.createElement("div",{className:"gf-form"},a.a.createElement("label",{className:"gf-form-label width-10"},"C:"),a.a.createElement("input",{className:"input-small gf-form-input width-15",type:"number",id:"C",value:e.getC(),onChange:function(n){e.setC(Number(n.target.value)),t.setState({opt:e.getC()})}})),a.a.createElement("div",{className:"gf-form"},a.a.createElement("label",{className:"gf-form-label width-10"},"Max iterations:"),a.a.createElement("input",{className:"input-small gf-form-input width-15",type:"number",id:"maxiter",value:e.getMaxIter(),onChange:function(n){e.setMaxIter(Number(n.target.value)),t.setState({opt:e.getMaxIter()})}})),a.a.createElement("div",{className:"gf-form"},a.a.createElement("label",{className:"gf-form-label width-10"},"Number passes:"),a.a.createElement("input",{className:"input-small gf-form-input width-15",type:"number",id:"numpas",value:e.getNumPass(),onChange:function(n){e.setNumPass(Number(n.target.value)),t.setState({opt:e.getNumPass()})}}))))},e}(a.a.Component),g=function(){function t(){this.points=[],this.labels=[]}return t.prototype.setValue=function(t){var e=this;this.points=[],this.labels=[],t.forEach((function(t){e.points.push([t[0],t[1]]),e.labels.push(t[2])}))},t.prototype.getPoints=function(){return this.points},t.prototype.getLabels=function(){return this.labels},t}(),v=n(6),y=n(9),b=function(){function t(){this.points=[]}return t.prototype.setValue=function(t){var e=this;this.points=[],t.forEach((function(t){var n=[0,0];n[0]=t[0],n[1]=t[1],e.points.push(n)}))},t.prototype.getPoints=function(){return this.points},t}(),A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={prec:2},e}return Object(i.b)(e,t),e.prototype.render=function(){var t=this,e=this.props.options;return a.a.createElement("div",{className:"container"},a.a.createElement("h1",null,"Options"),a.a.createElement("div",{id:"RLopt",className:"gf-form"},a.a.createElement("label",{className:"gf-form-label width-10"},"Precision:"),a.a.createElement("div",{className:"gf-form-select-wrapper max-width-15"},a.a.createElement("select",{className:"input-small gf-form-input",value:e.getPrecision(),onChange:function(n){e.setPrecision(Number(n.target.value)),t.setState({prec:e.getPrecision()})}},a.a.createElement("option",{value:"1"},"1"),a.a.createElement("option",{value:"2"},"2"),a.a.createElement("option",{value:"3"},"3"),a.a.createElement("option",{value:"4"},"4"),a.a.createElement("option",{value:"5"},"5")))))},e}(a.a.Component),E=function(){function t(){}return t.prototype.train=function(t,e){return new d.a("RLOG",p.a.logarithmic(t.getPoints(),{order:e.getOrder(),precision:e.getPrecision()}).equation,p.a.logarithmic(t.getPoints(),{order:e.getOrder(),precision:e.getPrecision()}).string,e,p.a.logarithmic(t.getPoints(),{order:e.getOrder(),precision:e.getPrecision()}).r2)},t}(),w=function(){function t(){}return t.prototype.train=function(t,e){return new d.a("REXP",p.a.exponential(t.getPoints(),{order:e.getOrder(),precision:e.getPrecision()}).equation,p.a.exponential(t.getPoints(),{order:e.getOrder(),precision:e.getPrecision()}).string,e,p.a.exponential(t.getPoints(),{order:e.getOrder(),precision:e.getPrecision()}).r2)},t}(),x={RL:new f,SVM:new h,RLOG:new E,REXP:new w},C={RL:A,SVM:m,RLOG:A,REXP:A},O={RL:new b,SVM:new g,RLOG:new b,REXP:new b},P={RL:new v.a,SVM:new y.a,RLOG:new v.a,REXP:new v.a},B=function(){function t(){}return t.prototype.getData=function(){return this.data},t.prototype.getPredictor=function(){return this.predictor},t.prototype.setData=function(t){this.data&&this.data.setValue(t)},t.prototype.setAlgorithm=function(t){this.predictor=new d.a(t,[],"",P[t]),this.strategy=x[t],this.data=O[t]},t.prototype.setPredictorOptions=function(t){var e;null===(e=this.predictor)||void 0===e||e.setOpt(t)},t.prototype.train=function(){var t,e=null===(t=this.predictor)||void 0===t?void 0:t.getOpt();this.strategy&&this.data&&e&&(this.predictor=this.strategy.train(this.data,e))},t.prototype.downloadPredictor=function(){if(this.predictor){var t=n(18),e=this.predictor.toJSON(),r=new File([e],"Training.json",{type:"text/json;charset=utf-8"});t.saveAs(r)}},t}(),N=function(t){function e(e){var n=t.call(this,e)||this;return n.state={algView:void 0,options:{},fun:"",acc:0},n.model=new B,n.algorithm="RL",n}return Object(i.b)(e,t),e.validateFile=function(t){if(!t.match(/^[-?\d.\d?,-?\d.\d?\n]+/))throw new Error("Data has wrong formattation!")},e.parseCSVtoData=function(t){var e=[];return t.trim().split("\n").forEach((function(t){var n=t.split(","),r=[];n.forEach((function(t){r.push(parseFloat(t))})),e.push(r)})),e},e.prototype.loadData=function(t){var n=this,r=new FileReader;if(t){r.readAsText(t);try{r.onload=function(t){e.validateFile(t.target&&t.target.result?t.target.result.toString():"");var r=e.parseCSVtoData(t.target&&t.target.result?t.target.result.toString():"");n.model.setData(r);var i=document.getElementById("train");i&&i.setAttribute("style","display: block")}}catch(t){alert(t)}}},e.prototype.loadOpt=function(t){var e=this;if(t){var n=new FileReader;if("json"===t.name.split(".").pop()){n.readAsText(t);try{n.onload=function(t){var n,r=t.target&&t.target.result?t.target.result.toString():"";e.model.setPredictorOptions(r),e.setState({options:null===(n=e.model.getPredictor())||void 0===n?void 0:n.getOpt()}),e.setState({fun:""}),e.setState({acc:0})}}catch(t){alert(t)}}else alert("File extension is not json!")}},e.prototype.setAlgorithm=function(t){this.algorithm=t},e.prototype.selectAlgorithm=function(){this.model.setAlgorithm(this.algorithm),this.setState({algView:C[this.algorithm]}),this.setState({options:P[this.algorithm]});var t=document.getElementById("alg");t&&t.setAttribute("disabled","true");var e=document.getElementById("import");e&&e.setAttribute("style","display: block")},e.prototype.train=function(){var t,e,n;if(this.model.getData())if(this.model.train(),null===(t=this.model.getPredictor())||void 0===t?void 0:t.getPredFun().match(/NaN/))alert("Dataset is not relevant to the algorithm!");else{var r=document.getElementsByClassName("function")[0],i=document.getElementsByClassName("function")[1];r&&i&&(r.setAttribute("style","display: block"),i.setAttribute("style","display: block"));var o=document.getElementById("reset");o&&o.setAttribute("style","display: block");var a=document.getElementById("download");a&&a.setAttribute("style","display: block"),this.setState({fun:null===(e=this.model.getPredictor())||void 0===e?void 0:e.getPredFun()}),this.setState({acc:null===(n=this.model.getPredictor())||void 0===n?void 0:n.getAcc()})}},e.prototype.render=function(){var t=this;return a.a.createElement(c,{selectAlg:function(e){t.setAlgorithm(e.target.value)},buttonSelectAlg:function(){t.selectAlgorithm()},buttonInputData:function(e){t.loadData(e.target&&e.target.files?e.target.files[0]:null)},buttonInputOpt:function(e){t.loadOpt(e.target&&e.target.files?e.target.files[0]:null)},buttonTrain:function(){return t.train()},predictor:this.state.fun,nameAcc:(this.algorithm,"R^2"),accuracy:this.state.acc,buttonDownload:function(){t.model.downloadPredictor()},AlgView:this.state.algView,options:this.state.options})},e}(o.PureComponent);n.d(e,"ConfigCtrl",(function(){return S})),n.d(e,"plugin",(function(){return k}));var S=function(){},k=(new r.AppPlugin).addConfigPage({title:"Wizard",icon:"fa fa-magic",body:l,id:"import"}).addConfigPage({title:"Training",icon:"fa fa-arrow-down",body:N,id:"training"})}])}));
//# sourceMappingURL=module.js.map